{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectWithoutProperties from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Form,Col,Container,Row,OverlayTrigger,Tooltip}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import firebase from'firebase';import moment from'moment';import'./SelectionForm.css';function SelectionFrom(_ref){var showForm=_ref.showForm,kayaks=_ref.kayaks,route=_ref.route,value=_ref.value,kayaksInStock=_ref.kayaksInStock,back=_ref.back,showStore=_ref.showStore,storePath=_ref.storePath;var _useState=useState('no trip name'),_useState2=_slicedToArray(_useState,2),tripName=_useState2[0],SetTripName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),kayaksTaking=_useState4[0],setKayaksTaking=_useState4[1];var _useState5=useState('not selected'),_useState6=_slicedToArray(_useState5,2),startTime=_useState6[0],setTime=_useState6[1];var _useState7=useState('not selected'),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState('not selected'),_useState10=_slicedToArray(_useState9,2),otherLoaction=_useState10[0],SetOtherLocation=_useState10[1];var _useState11=useState('not selected'),_useState12=_slicedToArray(_useState11,2),phoneNum=_useState12[0],setPhone=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),ifChecked=_useState14[0],setChecked=_useState14[1];// firebase requirements\nvar database=firebase.database();var ref=database.ref('bookings');var booking={route:route,name:tripName,numOfKayaks:kayaksTaking,time:startTime,pickUpLocation:location,other:otherLoaction,date:value.format(\"MM/DD/YY\"),phone:phoneNum,timeBooked:moment().format('MMMM Do YYYY, h:mm:ss a')};//submitting form to firebase database\nvar submitHandler=function submitHandler(){if(kayaksTaking>0&&ifChecked){console.log('booking sent');ref.push(booking);showStore();}else{console.log('erroror');console.log(ifChecked);}};// dynamic Kayaks Option\nvar kayaksOptions=null;//rendering nonBooked days\nvar renderKayaksOptions=[];for(var i=0;i<kayaksInStock+1;i++){renderKayaksOptions.push(i);kayaksOptions=renderKayaksOptions.map(function(x){return/*#__PURE__*/React.createElement(\"option\",{value:x},x,\" kayak(s)\");});}//rendering booked days\nvar datesBookArray=[];var kayaksLeft=null;var kayaksLeftArray=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};//when day is selected\nkayaks.forEach(function(booking){if(value.isSame(booking.date,'day')){var parsedKayaks=JSON.parse(booking.numOfKayaks);datesBookArray.push(parsedKayaks);if(datesBookArray.length>1){// muliple bookings on single date\nvar kayaksBookedTotal=datesBookArray.reduce(reducer);var calculatedLeft=kayaksInStock-kayaksBookedTotal;kayaksLeft=calculatedLeft;}else if(datesBookArray.length===1){// single booking on single date\nvar _calculatedLeft=kayaksInStock-parsedKayaks;kayaksLeft=_calculatedLeft;}}});// rendering the logic from above if selected day is booked\nif(!(kayaksLeft===null)){for(var _i=0;_i<kayaksLeft+1;_i++){kayaksLeftArray.push(_i);}kayaksOptions=kayaksLeftArray.map(function(x){return/*#__PURE__*/React.createElement(\"option\",{value:x},x,\" kayak(s)\");});}// rending the correct store path\nvar storeHref=null;if(!(kayaksOptions===null)){kayaksOptions.forEach(function callback(value,index){// num of kayaks selected on the form \nif(kayaksTaking===\"\".concat(index)){// matching the firebase storepath with the num of kayaks taking\nstorePath.forEach(function(element){if(storePath[index]===element){storeHref=\"\".concat(element);}});}});}var selectionForm=null;if(showForm){selectionForm=/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Col,{sm:8},/*#__PURE__*/React.createElement(Form,{className:\"form shadow\"},/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"header-form\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"map-marker-alt\",size:\"1x\"}),\" \",route,\" on \",value.format('D/MM/yy'))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridname\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Name\",onChange:function onChange(e){SetTripName(e.target.value);}}))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridPassword\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Choose...\",onChange:function onChange(e){setKayaksTaking(e.target.value);}},kayaksOptions))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridphone\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"phone\",placeholder:\"###-###-#### (your phone number)\",onChange:function onChange(e){setPhone(e.target.value);}}))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridPassword\"},/*#__PURE__*/React.createElement(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/React.createElement(Tooltip,{id:\"tooltip\"},\"This is where we will pick you up for the start of the trip\")},function(_ref2){var ref=_ref2.ref,triggerHandler=_objectWithoutProperties(_ref2,[\"ref\"]);return/*#__PURE__*/React.createElement(Form.Label,Object.assign({variant:\"light\"},triggerHandler,_defineProperty({className:\"d-inline-flex align-items-center\",ref:ref},\"className\",\"form-text\")),\"Pick Up Location\");}),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Choose...\",onChange:function onChange(e){setLocation(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",null,\"MarketPlace Mall (North East Corner)\"),/*#__PURE__*/React.createElement(\"option\",null,\"LincolnSquare Mall (South Side)\"),/*#__PURE__*/React.createElement(\"option\",null,\"Savoy Walmart (North East Corner)\"),/*#__PURE__*/React.createElement(\"option\",null,\"Other (enter address below)\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridname\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"if selected 'Other'\",onChange:function onChange(e){SetOtherLocation(e.target.value);}}))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridPassword\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"form-text\"},\"Start Time\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Choose...\",onChange:function onChange(e){setTime(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",null,\"8:00 am\"),/*#__PURE__*/React.createElement(\"option\",null,\"9:30 am\"),/*#__PURE__*/React.createElement(\"option\",null,\"11:00 am\")))),/*#__PURE__*/React.createElement(Form.Group,{id:\"formGridCheckbox\"},/*#__PURE__*/React.createElement(\"a\",{target:\"blank\",href:'https://media.makeameme.org/created/haha-got-you.jpg'},/*#__PURE__*/React.createElement(Form.Check,{onChange:function onChange(e){setChecked(e.target.checked);},type:\"checkbox\",label:\"I agree to KingFisher Kayaking Terms of Service\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"button-hover\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-button no-hover\",onClick:back},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-left\",size:\"1x\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\" Back \"))),/*#__PURE__*/React.createElement(Col,{className:\"button-hover\"},/*#__PURE__*/React.createElement(\"a\",{href:storeHref},/*#__PURE__*/React.createElement(\"div\",{className:\"form-button no-hover\",onClick:submitHandler},/*#__PURE__*/React.createElement(\"span\",null,\" Continue \"),/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-right\",size:\"1x\"})))))))));}else{selectionForm=null;};return/*#__PURE__*/React.createElement(\"div\",null,selectionForm);}export default SelectionFrom;","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/SelectionForm/SelectionForm.js"],"names":["React","useState","Form","Col","Container","Row","OverlayTrigger","Tooltip","FontAwesomeIcon","firebase","moment","SelectionFrom","showForm","kayaks","route","value","kayaksInStock","back","showStore","storePath","tripName","SetTripName","kayaksTaking","setKayaksTaking","startTime","setTime","location","setLocation","otherLoaction","SetOtherLocation","phoneNum","setPhone","ifChecked","setChecked","database","ref","booking","name","numOfKayaks","time","pickUpLocation","other","date","format","phone","timeBooked","submitHandler","console","log","push","kayaksOptions","renderKayaksOptions","i","map","x","datesBookArray","kayaksLeft","kayaksLeftArray","reducer","accumulator","currentValue","forEach","isSame","parsedKayaks","JSON","parse","length","kayaksBookedTotal","reduce","calculatedLeft","storeHref","callback","index","element","selectionForm","e","target","triggerHandler","checked"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport { Form, Col, Container, Row, OverlayTrigger, Tooltip } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport firebase from 'firebase';\r\nimport moment from 'moment';\r\nimport './SelectionForm.css';\r\n\r\n\r\nfunction SelectionFrom({showForm, kayaks, route, value, kayaksInStock , back, showStore, storePath }) {\r\n\r\n    const [tripName, SetTripName] = useState('no trip name');\r\n    const [kayaksTaking, setKayaksTaking] = useState();\r\n    const [startTime, setTime] = useState('not selected');\r\n    const [location, setLocation] = useState('not selected');\r\n    const [otherLoaction, SetOtherLocation] = useState('not selected');\r\n    const [phoneNum, setPhone] = useState('not selected');\r\n    const [ifChecked, setChecked] = useState();\r\n\r\n\r\n\r\n  // firebase requirements\r\n  const database = firebase.database();\r\n  const ref = database.ref('bookings');\r\n\r\n\r\n  const booking = {\r\n    route: route,\r\n    name: tripName,\r\n    numOfKayaks: kayaksTaking,\r\n    time: startTime,\r\n    pickUpLocation: location,\r\n    other: otherLoaction,\r\n    date: value.format(\"MM/DD/YY\"),\r\n    phone: phoneNum,\r\n    timeBooked: moment().format('MMMM Do YYYY, h:mm:ss a')\r\n  }\r\n\r\n  //submitting form to firebase database\r\n  const submitHandler = () => {\r\n    if(kayaksTaking > 0 && ifChecked){\r\n      console.log('booking sent');\r\n      ref.push(booking);\r\n    showStore()\r\n    } else {\r\n      console.log('erroror')\r\n      console.log(ifChecked)\r\n    }\r\n  }\r\n\r\n\r\n\r\n// dynamic Kayaks Option\r\n  let kayaksOptions = null\r\n\r\n  //rendering nonBooked days\r\n  let renderKayaksOptions = []\r\n  for (let i = 0; i < kayaksInStock + 1; i++){\r\n    renderKayaksOptions.push(i)\r\n    kayaksOptions = renderKayaksOptions.map(x=> (<option value={x} >{x} kayak(s)</option>))\r\n  }\r\n\r\n\r\n  //rendering booked days\r\n  let datesBookArray = []\r\n  let kayaksLeft = null\r\n  let kayaksLeftArray = []\r\n  const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n\r\n    //when day is selected\r\n    kayaks.forEach(booking => {\r\n        if (value.isSame(booking.date, 'day') ) {\r\n            let parsedKayaks = JSON.parse(booking.numOfKayaks)\r\n            datesBookArray.push(parsedKayaks)\r\n\r\n            if(datesBookArray.length > 1){\r\n                // muliple bookings on single date\r\n                let kayaksBookedTotal = datesBookArray.reduce(reducer)\r\n                let calculatedLeft = kayaksInStock - kayaksBookedTotal\r\n                kayaksLeft = calculatedLeft\r\n\r\n            } else if (datesBookArray.length === 1){\r\n                // single booking on single date\r\n                let calculatedLeft = kayaksInStock - parsedKayaks\r\n                kayaksLeft = calculatedLeft\r\n            }\r\n        }\r\n    });\r\n\r\n    // rendering the logic from above if selected day is booked\r\n    if (!(kayaksLeft === null)){\r\n        for (let i = 0; i < kayaksLeft + 1; i++){\r\n            kayaksLeftArray.push(i)\r\n        }\r\n        kayaksOptions = kayaksLeftArray.map(x=> (<option value={x} >{x} kayak(s)</option>))\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // rending the correct store path\r\n\r\n    let storeHref = null    \r\n\r\n    if (!(kayaksOptions === null)){\r\n\r\n        kayaksOptions.forEach(function callback(value, index)  {\r\n\r\n            // num of kayaks selected on the form \r\n\r\n            if (kayaksTaking === `${index}`){\r\n\r\n                // matching the firebase storepath with the num of kayaks taking\r\n\r\n                storePath.forEach(element => {\r\n                    if (storePath[index] === element){\r\n                      storeHref = `${element}`\r\n                    }\r\n                });\r\n\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    let selectionForm = null\r\n    if (showForm){ selectionForm = ( \r\n        <Container fluid >\r\n            <Row className=\"justify-content-md-center\">\r\n                <Col sm={8} >\r\n                    <Form  className='form shadow'>\r\n                        <Form.Row>\r\n                            <div className='header-form' >\r\n                                <FontAwesomeIcon icon=\"map-marker-alt\"  size=\"1x\" /> {route} on {value.format('D/MM/yy')}\r\n                            </div>\r\n                        </Form.Row>\r\n\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridname\">\r\n                            <Form.Control type=\"text\" placeholder=\"Name\" onChange={(e)=> {SetTripName(e.target.value)}} />\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridPassword\">\r\n                                <Form.Control as=\"select\" defaultValue=\"Choose...\"  onChange={(e)=> {setKayaksTaking(e.target.value)}}>\r\n                                {kayaksOptions}\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridphone\">\r\n                            <Form.Control type=\"phone\" placeholder=\"###-###-#### (your phone number)\" onChange={(e) => {setPhone(e.target.value)}} />\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridPassword\">\r\n                                <OverlayTrigger\r\n                                    placement=\"top\"\r\n                                    overlay={<Tooltip id=\"tooltip\">This is where we will pick you up for the start of the trip</Tooltip>}\r\n                                >\r\n                                    {({ ref, ...triggerHandler }) => (\r\n                                    <Form.Label variant=\"light\"\r\n                                        {...triggerHandler}\r\n                                        className=\"d-inline-flex align-items-center\" ref={ref} className='form-text'\r\n                                    >Pick Up Location</Form.Label>\r\n                                    )}\r\n                                </OverlayTrigger>\r\n                                <Form.Control as=\"select\" defaultValue=\"Choose...\"  onChange={(e) => {setLocation(e.target.value)}}>\r\n                                    <option>MarketPlace Mall (North East Corner)</option>\r\n                                    <option>LincolnSquare Mall (South Side)</option>\r\n                                    <option>Savoy Walmart (North East Corner)</option>\r\n                                    <option>Other (enter address below)</option>\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridname\">\r\n                            <Form.Control type=\"text\" placeholder=\"if selected 'Other'\" onChange={(e)=> {SetOtherLocation(e.target.value)}} />\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                        <Form.Group as={Col} controlId=\"formGridPassword\">\r\n                                <Form.Label className='form-text'>Start Time</Form.Label>\r\n                                <Form.Control as=\"select\" defaultValue=\"Choose...\"  onChange={(e)=> {setTime(e.target.value)}}>\r\n                                    <option>8:00 am</option>\r\n                                    <option>9:30 am</option>\r\n                                    <option>11:00 am</option>\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n\r\n\r\n                        <Form.Group id=\"formGridCheckbox\" >\r\n                            <a target='blank' href={'https://media.makeameme.org/created/haha-got-you.jpg'} >\r\n                                <Form.Check onChange={(e) => {setChecked(e.target.checked)}}  type=\"checkbox\" label=\"I agree to KingFisher Kayaking Terms of Service\" />\r\n                            </a>\r\n                        </Form.Group>\r\n\r\n                        <Row>\r\n                            <Col className='button-hover'>\r\n                                <div className='form-button no-hover' onClick={back}>\r\n                                    <FontAwesomeIcon icon=\"arrow-left\"  size=\"1x\" /> <span> Back </span>\r\n                                </div>\r\n                            </Col>\r\n                            <Col className='button-hover'>\r\n                                <a  href={storeHref} >\r\n                                    <div className='form-button no-hover' onClick={submitHandler}>\r\n                                        <span > Continue </span><FontAwesomeIcon icon=\"arrow-right\"  size=\"1x\" />\r\n                                    </div> \r\n                                </a>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );} else { selectionForm = (null)  };\r\n    \r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            {selectionForm}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SelectionFrom;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var events = require('events');\n\nmodule.exports = function () {\n  var listeners = {};\n  var that = new events.EventEmitter();\n\n  that.watch = function (key, cb) {\n    if (!listeners[key]) {\n      listeners[key] = new events.EventEmitter();\n      listeners[key].setMaxListeners(0);\n    }\n\n    if (cb) listeners[key].on('change', cb);\n    return listeners[key];\n  };\n\n  that.watcher = function (key, cb) {\n    var watcher = new events.EventEmitter();\n\n    var onchange = function () {\n      watcher.emit('change', 'change', key);\n    };\n\n    that.watch(key, onchange);\n    if (cb) watcher.on('change', cb);\n\n    watcher.close = function () {\n      that.unwatch(key, onchange);\n    };\n\n    return watcher;\n  };\n\n  that.unwatch = function (key, cb) {\n    if (!listeners[key]) return;\n    if (cb) listeners[key].removeListener('change', cb);else listeners[key].removeAllListeners('change');\n    if (!listeners[key].listeners('change').length) delete listeners[key];\n    ;\n  };\n\n  that.change = function (key) {\n    if (listeners[key]) listeners[key].emit('change');\n    that.emit('change', key);\n  };\n\n  that.cb = function (key, cb) {\n    return function (err, val) {\n      if (key) that.change(key);\n      if (cb) cb(err, val);\n    };\n  };\n\n  return that;\n};","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/node_modules/level-filesystem/watchers.js"],"names":["events","require","module","exports","listeners","that","EventEmitter","watch","key","cb","setMaxListeners","on","watcher","onchange","emit","close","unwatch","removeListener","removeAllListeners","length","change","err","val"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,YAAW;AAC3B,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,IAAI,GAAG,IAAIL,MAAM,CAACM,YAAX,EAAX;;AAEAD,EAAAA,IAAI,CAACE,KAAL,GAAa,UAASC,GAAT,EAAcC,EAAd,EAAkB;AAC9B,QAAI,CAACL,SAAS,CAACI,GAAD,CAAd,EAAqB;AACpBJ,MAAAA,SAAS,CAACI,GAAD,CAAT,GAAiB,IAAIR,MAAM,CAACM,YAAX,EAAjB;AACAF,MAAAA,SAAS,CAACI,GAAD,CAAT,CAAeE,eAAf,CAA+B,CAA/B;AACA;;AAED,QAAID,EAAJ,EAAQL,SAAS,CAACI,GAAD,CAAT,CAAeG,EAAf,CAAkB,QAAlB,EAA4BF,EAA5B;AACR,WAAOL,SAAS,CAACI,GAAD,CAAhB;AACA,GARD;;AAUAH,EAAAA,IAAI,CAACO,OAAL,GAAe,UAASJ,GAAT,EAAcC,EAAd,EAAkB;AAChC,QAAIG,OAAO,GAAG,IAAIZ,MAAM,CAACM,YAAX,EAAd;;AACA,QAAIO,QAAQ,GAAG,YAAW;AACzBD,MAAAA,OAAO,CAACE,IAAR,CAAa,QAAb,EAAuB,QAAvB,EAAiCN,GAAjC;AACA,KAFD;;AAIAH,IAAAA,IAAI,CAACE,KAAL,CAAWC,GAAX,EAAgBK,QAAhB;AACA,QAAIJ,EAAJ,EAAQG,OAAO,CAACD,EAAR,CAAW,QAAX,EAAqBF,EAArB;;AACRG,IAAAA,OAAO,CAACG,KAAR,GAAgB,YAAW;AAC1BV,MAAAA,IAAI,CAACW,OAAL,CAAaR,GAAb,EAAkBK,QAAlB;AACA,KAFD;;AAIA,WAAOD,OAAP;AACA,GAbD;;AAeAP,EAAAA,IAAI,CAACW,OAAL,GAAe,UAASR,GAAT,EAAcC,EAAd,EAAkB;AAChC,QAAI,CAACL,SAAS,CAACI,GAAD,CAAd,EAAqB;AACrB,QAAIC,EAAJ,EAAQL,SAAS,CAACI,GAAD,CAAT,CAAeS,cAAf,CAA8B,QAA9B,EAAwCR,EAAxC,EAAR,KACKL,SAAS,CAACI,GAAD,CAAT,CAAeU,kBAAf,CAAkC,QAAlC;AACL,QAAI,CAACd,SAAS,CAACI,GAAD,CAAT,CAAeJ,SAAf,CAAyB,QAAzB,EAAmCe,MAAxC,EAAgD,OAAOf,SAAS,CAACI,GAAD,CAAhB;AAAsB;AACtE,GALD;;AAOAH,EAAAA,IAAI,CAACe,MAAL,GAAc,UAASZ,GAAT,EAAc;AAC3B,QAAIJ,SAAS,CAACI,GAAD,CAAb,EAAoBJ,SAAS,CAACI,GAAD,CAAT,CAAeM,IAAf,CAAoB,QAApB;AACpBT,IAAAA,IAAI,CAACS,IAAL,CAAU,QAAV,EAAoBN,GAApB;AACA,GAHD;;AAKAH,EAAAA,IAAI,CAACI,EAAL,GAAU,UAASD,GAAT,EAAcC,EAAd,EAAkB;AAC3B,WAAO,UAASY,GAAT,EAAcC,GAAd,EAAmB;AACzB,UAAId,GAAJ,EAASH,IAAI,CAACe,MAAL,CAAYZ,GAAZ;AACT,UAAIC,EAAJ,EAAQA,EAAE,CAACY,GAAD,EAAMC,GAAN,CAAF;AACR,KAHD;AAIA,GALD;;AAOA,SAAOjB,IAAP;AACA,CAjDD","sourcesContent":["var events = require('events');\n\nmodule.exports = function() {\n\tvar listeners = {};\n\tvar that = new events.EventEmitter();\n\n\tthat.watch = function(key, cb) {\n\t\tif (!listeners[key]) {\n\t\t\tlisteners[key] = new events.EventEmitter();\n\t\t\tlisteners[key].setMaxListeners(0);\n\t\t}\n\n\t\tif (cb) listeners[key].on('change', cb);\n\t\treturn listeners[key];\n\t};\n\n\tthat.watcher = function(key, cb) {\n\t\tvar watcher = new events.EventEmitter();\n\t\tvar onchange = function() {\n\t\t\twatcher.emit('change', 'change', key);\n\t\t};\n\n\t\tthat.watch(key, onchange);\n\t\tif (cb) watcher.on('change', cb);\n\t\twatcher.close = function() {\n\t\t\tthat.unwatch(key, onchange);\n\t\t};\n\n\t\treturn watcher;\n\t};\n\n\tthat.unwatch = function(key, cb) {\n\t\tif (!listeners[key]) return;\n\t\tif (cb) listeners[key].removeListener('change', cb);\n\t\telse listeners[key].removeAllListeners('change');\n\t\tif (!listeners[key].listeners('change').length) delete listeners[key];;\n\t};\n\n\tthat.change = function(key) {\n\t\tif (listeners[key]) listeners[key].emit('change');\n\t\tthat.emit('change', key);\n\t};\n\n\tthat.cb = function(key, cb) {\n\t\treturn function(err, val) {\n\t\t\tif (key) that.change(key);\n\t\t\tif (cb) cb(err, val);\n\t\t};\n\t};\n\n\treturn that;\n};"]},"metadata":{},"sourceType":"script"}
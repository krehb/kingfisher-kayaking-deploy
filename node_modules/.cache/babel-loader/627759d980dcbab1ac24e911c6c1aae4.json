{"ast":null,"code":"/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License\n * <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\nvar util = require('./util'),\n    WriteError = require('./errors').WriteError,\n    getOptions = util.getOptions,\n    dispatchError = util.dispatchError;\n\nfunction Batch(levelup) {\n  this._levelup = levelup;\n  this.batch = levelup.db.batch();\n  this.ops = [];\n}\n\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(this._levelup, options);\n  var key = util.encodeKey(key_, options),\n      value = util.encodeValue(value_, options);\n\n  try {\n    this.batch.put(key, value);\n  } catch (e) {\n    throw new WriteError(e);\n  }\n\n  this.ops.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n  return this;\n};\n\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(this._levelup, options);\n  var key = util.encodeKey(key_, options);\n\n  try {\n    this.batch.del(key);\n  } catch (err) {\n    throw new WriteError(err);\n  }\n\n  this.ops.push({\n    type: 'del',\n    key: key\n  });\n  return this;\n};\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear();\n  } catch (err) {\n    throw new WriteError(err);\n  }\n\n  this.ops = [];\n  return this;\n};\n\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup,\n      ops = this.ops;\n\n  try {\n    this.batch.write(function (err) {\n      if (err) return dispatchError(levelup, new WriteError(err), callback);\n      levelup.emit('batch', ops);\n      if (callback) callback();\n    });\n  } catch (err) {\n    throw new WriteError(err);\n  }\n};\n\nmodule.exports = Batch;","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/node_modules/levelup/lib/batch.js"],"names":["util","require","WriteError","getOptions","dispatchError","Batch","levelup","_levelup","batch","db","ops","prototype","put","key_","value_","options","key","encodeKey","value","encodeValue","e","push","type","del","err","clear","write","callback","emit","module","exports"],"mappings":"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","sourcesContent":["/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License\n * <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\n\nvar util          = require('./util')\n  , WriteError    = require('./errors').WriteError\n\n  , getOptions    = util.getOptions\n  , dispatchError = util.dispatchError\n\nfunction Batch (levelup) {\n  this._levelup = levelup\n  this.batch = levelup.db.batch()\n  this.ops = []\n}\n\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(this._levelup, options)\n\n  var key   = util.encodeKey(key_, options)\n    , value = util.encodeValue(value_, options)\n\n  try {\n    this.batch.put(key, value)\n  } catch (e) {\n    throw new WriteError(e)\n  }\n  this.ops.push({ type : 'put', key : key, value : value })\n\n  return this\n}\n\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(this._levelup, options)\n\n  var key = util.encodeKey(key_, options)\n\n  try {\n    this.batch.del(key)\n  } catch (err) {\n    throw new WriteError(err)\n  }\n  this.ops.push({ type : 'del', key : key })\n\n  return this\n}\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear()\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops = []\n  return this\n}\n\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup\n    , ops     = this.ops\n\n  try {\n    this.batch.write(function (err) {\n      if (err)\n        return dispatchError(levelup, new WriteError(err), callback)\n      levelup.emit('batch', ops)\n      if (callback)\n        callback()\n    })\n  } catch (err) {\n    throw new WriteError(err)\n  }\n}\n\nmodule.exports = Batch\n"]},"metadata":{},"sourceType":"script"}
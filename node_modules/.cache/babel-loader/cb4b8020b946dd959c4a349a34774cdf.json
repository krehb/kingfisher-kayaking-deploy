{"ast":null,"code":"/* Copyright (c) 2013 Rod Vagg, MIT License */\nvar xtend = require('xtend'),\n    AbstractIterator = require('./abstract-iterator'),\n    AbstractChainedBatch = require('./abstract-chained-batch');\n\nfunction AbstractLevelDOWN(location) {\n  if (!arguments.length || location === undefined) throw new Error('constructor requires at least a location argument');\n  if (typeof location != 'string') throw new Error('constructor requires a location string argument');\n  this.location = location;\n}\n\nAbstractLevelDOWN.prototype.open = function (options, callback) {\n  if (typeof options == 'function') callback = options;\n  if (typeof callback != 'function') throw new Error('open() requires a callback argument');\n  if (typeof options != 'object') options = {};\n  if (typeof this._open == 'function') return this._open(options, callback);\n  process.nextTick(callback);\n};\n\nAbstractLevelDOWN.prototype.close = function (callback) {\n  if (typeof callback != 'function') throw new Error('close() requires a callback argument');\n  if (typeof this._close == 'function') return this._close(callback);\n  process.nextTick(callback);\n};\n\nAbstractLevelDOWN.prototype.get = function (key, options, callback) {\n  var err;\n  if (typeof options == 'function') callback = options;\n  if (typeof callback != 'function') throw new Error('get() requires a callback argument');\n  if (err = this._checkKeyValue(key, 'key', this._isBuffer)) return callback(err);\n  if (!this._isBuffer(key)) key = String(key);\n  if (typeof options != 'object') options = {};\n  if (typeof this._get == 'function') return this._get(key, options, callback);\n  process.nextTick(function () {\n    callback(new Error('NotFound'));\n  });\n};\n\nAbstractLevelDOWN.prototype.put = function (key, value, options, callback) {\n  var err;\n  if (typeof options == 'function') callback = options;\n  if (typeof callback != 'function') throw new Error('put() requires a callback argument');\n  if (err = this._checkKeyValue(key, 'key', this._isBuffer)) return callback(err);\n  if (err = this._checkKeyValue(value, 'value', this._isBuffer)) return callback(err);\n  if (!this._isBuffer(key)) key = String(key); // coerce value to string in node, don't touch it in browser\n  // (indexeddb can store any JS type)\n\n  if (!this._isBuffer(value) && !process.browser) value = String(value);\n  if (typeof options != 'object') options = {};\n  if (typeof this._put == 'function') return this._put(key, value, options, callback);\n  process.nextTick(callback);\n};\n\nAbstractLevelDOWN.prototype.del = function (key, options, callback) {\n  var err;\n  if (typeof options == 'function') callback = options;\n  if (typeof callback != 'function') throw new Error('del() requires a callback argument');\n  if (err = this._checkKeyValue(key, 'key', this._isBuffer)) return callback(err);\n  if (!this._isBuffer(key)) key = String(key);\n  if (typeof options != 'object') options = {};\n  if (typeof this._del == 'function') return this._del(key, options, callback);\n  process.nextTick(callback);\n};\n\nAbstractLevelDOWN.prototype.batch = function (array, options, callback) {\n  if (!arguments.length) return this._chainedBatch();\n  if (typeof options == 'function') callback = options;\n  if (typeof callback != 'function') throw new Error('batch(array) requires a callback argument');\n  if (!Array.isArray(array)) return callback(new Error('batch(array) requires an array argument'));\n  if (typeof options != 'object') options = {};\n  var i = 0,\n      l = array.length,\n      e,\n      err;\n\n  for (; i < l; i++) {\n    e = array[i];\n    if (typeof e != 'object') continue;\n    if (err = this._checkKeyValue(e.type, 'type', this._isBuffer)) return callback(err);\n    if (err = this._checkKeyValue(e.key, 'key', this._isBuffer)) return callback(err);\n\n    if (e.type == 'put') {\n      if (err = this._checkKeyValue(e.value, 'value', this._isBuffer)) return callback(err);\n    }\n  }\n\n  if (typeof this._batch == 'function') return this._batch(array, options, callback);\n  process.nextTick(callback);\n}; //TODO: remove from here, not a necessary primitive\n\n\nAbstractLevelDOWN.prototype.approximateSize = function (start, end, callback) {\n  if (start == null || end == null || typeof start == 'function' || typeof end == 'function') {\n    throw new Error('approximateSize() requires valid `start`, `end` and `callback` arguments');\n  }\n\n  if (typeof callback != 'function') throw new Error('approximateSize() requires a callback argument');\n  if (!this._isBuffer(start)) start = String(start);\n  if (!this._isBuffer(end)) end = String(end);\n  if (typeof this._approximateSize == 'function') return this._approximateSize(start, end, callback);\n  process.nextTick(function () {\n    callback(null, 0);\n  });\n};\n\nAbstractLevelDOWN.prototype._setupIteratorOptions = function (options) {\n  var self = this;\n  options = xtend(options);\n  ['start', 'end', 'gt', 'gte', 'lt', 'lte'].forEach(function (o) {\n    if (options[o] && self._isBuffer(options[o]) && options[o].length === 0) delete options[o];\n  });\n  options.reverse = !!options.reverse; // fix `start` so it takes into account gt, gte, lt, lte as appropriate\n\n  if (options.reverse && options.lt) options.start = options.lt;\n  if (options.reverse && options.lte) options.start = options.lte;\n  if (!options.reverse && options.gt) options.start = options.gt;\n  if (!options.reverse && options.gte) options.start = options.gte;\n  if (options.reverse && options.lt && !options.lte || !options.reverse && options.gt && !options.gte) options.exclusiveStart = true; // start should *not* include matching key\n\n  return options;\n};\n\nAbstractLevelDOWN.prototype.iterator = function (options) {\n  if (typeof options != 'object') options = {};\n  options = this._setupIteratorOptions(options);\n  if (typeof this._iterator == 'function') return this._iterator(options);\n  return new AbstractIterator(this);\n};\n\nAbstractLevelDOWN.prototype._chainedBatch = function () {\n  return new AbstractChainedBatch(this);\n};\n\nAbstractLevelDOWN.prototype._isBuffer = function (obj) {\n  return Buffer.isBuffer(obj);\n};\n\nAbstractLevelDOWN.prototype._checkKeyValue = function (obj, type) {\n  if (obj === null || obj === undefined) return new Error(type + ' cannot be `null` or `undefined`');\n\n  if (this._isBuffer(obj)) {\n    if (obj.length === 0) return new Error(type + ' cannot be an empty Buffer');\n  } else if (String(obj) === '') return new Error(type + ' cannot be an empty String');\n};\n\nmodule.exports.AbstractLevelDOWN = AbstractLevelDOWN;\nmodule.exports.AbstractIterator = AbstractIterator;\nmodule.exports.AbstractChainedBatch = AbstractChainedBatch;","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/node_modules/abstract-leveldown/abstract-leveldown.js"],"names":["xtend","require","AbstractIterator","AbstractChainedBatch","AbstractLevelDOWN","location","arguments","length","undefined","Error","prototype","open","options","callback","_open","process","nextTick","close","_close","get","key","err","_checkKeyValue","_isBuffer","String","_get","put","value","browser","_put","del","_del","batch","array","_chainedBatch","Array","isArray","i","l","e","type","_batch","approximateSize","start","end","_approximateSize","_setupIteratorOptions","self","forEach","o","reverse","lt","lte","gt","gte","exclusiveStart","iterator","_iterator","obj","Buffer","isBuffer","module","exports"],"mappings":"AAAA;AAEA,IAAIA,KAAK,GAAkBC,OAAO,CAAC,OAAD,CAAlC;AAAA,IACIC,gBAAgB,GAAOD,OAAO,CAAC,qBAAD,CADlC;AAAA,IAEIE,oBAAoB,GAAGF,OAAO,CAAC,0BAAD,CAFlC;;AAIA,SAASG,iBAAT,CAA4BC,QAA5B,EAAsC;AACpC,MAAI,CAACC,SAAS,CAACC,MAAX,IAAqBF,QAAQ,KAAKG,SAAtC,EACE,MAAM,IAAIC,KAAJ,CAAU,mDAAV,CAAN;AAEF,MAAI,OAAOJ,QAAP,IAAmB,QAAvB,EACE,MAAM,IAAII,KAAJ,CAAU,iDAAV,CAAN;AAEF,OAAKJ,QAAL,GAAgBA,QAAhB;AACD;;AAEDD,iBAAiB,CAACM,SAAlB,CAA4BC,IAA5B,GAAmC,UAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAC9D,MAAI,OAAOD,OAAP,IAAkB,UAAtB,EACEC,QAAQ,GAAGD,OAAX;AAEF,MAAI,OAAOC,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,qCAAV,CAAN;AAEF,MAAI,OAAOG,OAAP,IAAkB,QAAtB,EACEA,OAAO,GAAG,EAAV;AAEF,MAAI,OAAO,KAAKE,KAAZ,IAAqB,UAAzB,EACE,OAAO,KAAKA,KAAL,CAAWF,OAAX,EAAoBC,QAApB,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiBH,QAAjB;AACD,CAdD;;AAgBAT,iBAAiB,CAACM,SAAlB,CAA4BO,KAA5B,GAAoC,UAAUJ,QAAV,EAAoB;AACtD,MAAI,OAAOA,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,sCAAV,CAAN;AAEF,MAAI,OAAO,KAAKS,MAAZ,IAAsB,UAA1B,EACE,OAAO,KAAKA,MAAL,CAAYL,QAAZ,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiBH,QAAjB;AACD,CARD;;AAUAT,iBAAiB,CAACM,SAAlB,CAA4BS,GAA5B,GAAkC,UAAUC,GAAV,EAAeR,OAAf,EAAwBC,QAAxB,EAAkC;AAClE,MAAIQ,GAAJ;AAEA,MAAI,OAAOT,OAAP,IAAkB,UAAtB,EACEC,QAAQ,GAAGD,OAAX;AAEF,MAAI,OAAOC,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,oCAAV,CAAN;AAEF,MAAIY,GAAG,GAAG,KAAKC,cAAL,CAAoBF,GAApB,EAAyB,KAAzB,EAAgC,KAAKG,SAArC,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;AAEF,MAAI,CAAC,KAAKE,SAAL,CAAeH,GAAf,CAAL,EACEA,GAAG,GAAGI,MAAM,CAACJ,GAAD,CAAZ;AAEF,MAAI,OAAOR,OAAP,IAAkB,QAAtB,EACEA,OAAO,GAAG,EAAV;AAEF,MAAI,OAAO,KAAKa,IAAZ,IAAoB,UAAxB,EACE,OAAO,KAAKA,IAAL,CAAUL,GAAV,EAAeR,OAAf,EAAwBC,QAAxB,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiB,YAAY;AAAEH,IAAAA,QAAQ,CAAC,IAAIJ,KAAJ,CAAU,UAAV,CAAD,CAAR;AAAiC,GAAhE;AACD,CAtBD;;AAwBAL,iBAAiB,CAACM,SAAlB,CAA4BgB,GAA5B,GAAkC,UAAUN,GAAV,EAAeO,KAAf,EAAsBf,OAAtB,EAA+BC,QAA/B,EAAyC;AACzE,MAAIQ,GAAJ;AAEA,MAAI,OAAOT,OAAP,IAAkB,UAAtB,EACEC,QAAQ,GAAGD,OAAX;AAEF,MAAI,OAAOC,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,oCAAV,CAAN;AAEF,MAAIY,GAAG,GAAG,KAAKC,cAAL,CAAoBF,GAApB,EAAyB,KAAzB,EAAgC,KAAKG,SAArC,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;AAEF,MAAIA,GAAG,GAAG,KAAKC,cAAL,CAAoBK,KAApB,EAA2B,OAA3B,EAAoC,KAAKJ,SAAzC,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;AAEF,MAAI,CAAC,KAAKE,SAAL,CAAeH,GAAf,CAAL,EACEA,GAAG,GAAGI,MAAM,CAACJ,GAAD,CAAZ,CAhBuE,CAkBzE;AACA;;AACA,MAAI,CAAC,KAAKG,SAAL,CAAeI,KAAf,CAAD,IAA0B,CAACZ,OAAO,CAACa,OAAvC,EACED,KAAK,GAAGH,MAAM,CAACG,KAAD,CAAd;AAEF,MAAI,OAAOf,OAAP,IAAkB,QAAtB,EACEA,OAAO,GAAG,EAAV;AAEF,MAAI,OAAO,KAAKiB,IAAZ,IAAoB,UAAxB,EACE,OAAO,KAAKA,IAAL,CAAUT,GAAV,EAAeO,KAAf,EAAsBf,OAAtB,EAA+BC,QAA/B,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiBH,QAAjB;AACD,CA9BD;;AAgCAT,iBAAiB,CAACM,SAAlB,CAA4BoB,GAA5B,GAAkC,UAAUV,GAAV,EAAeR,OAAf,EAAwBC,QAAxB,EAAkC;AAClE,MAAIQ,GAAJ;AAEA,MAAI,OAAOT,OAAP,IAAkB,UAAtB,EACEC,QAAQ,GAAGD,OAAX;AAEF,MAAI,OAAOC,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,oCAAV,CAAN;AAEF,MAAIY,GAAG,GAAG,KAAKC,cAAL,CAAoBF,GAApB,EAAyB,KAAzB,EAAgC,KAAKG,SAArC,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;AAEF,MAAI,CAAC,KAAKE,SAAL,CAAeH,GAAf,CAAL,EACEA,GAAG,GAAGI,MAAM,CAACJ,GAAD,CAAZ;AAEF,MAAI,OAAOR,OAAP,IAAkB,QAAtB,EACEA,OAAO,GAAG,EAAV;AAEF,MAAI,OAAO,KAAKmB,IAAZ,IAAoB,UAAxB,EACE,OAAO,KAAKA,IAAL,CAAUX,GAAV,EAAeR,OAAf,EAAwBC,QAAxB,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiBH,QAAjB;AACD,CAtBD;;AAwBAT,iBAAiB,CAACM,SAAlB,CAA4BsB,KAA5B,GAAoC,UAAUC,KAAV,EAAiBrB,OAAjB,EAA0BC,QAA1B,EAAoC;AACtE,MAAI,CAACP,SAAS,CAACC,MAAf,EACE,OAAO,KAAK2B,aAAL,EAAP;AAEF,MAAI,OAAOtB,OAAP,IAAkB,UAAtB,EACEC,QAAQ,GAAGD,OAAX;AAEF,MAAI,OAAOC,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,2CAAV,CAAN;AAEF,MAAI,CAAC0B,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAL,EACE,OAAOpB,QAAQ,CAAC,IAAIJ,KAAJ,CAAU,yCAAV,CAAD,CAAf;AAEF,MAAI,OAAOG,OAAP,IAAkB,QAAtB,EACEA,OAAO,GAAG,EAAV;AAEF,MAAIyB,CAAC,GAAG,CAAR;AAAA,MACIC,CAAC,GAAGL,KAAK,CAAC1B,MADd;AAAA,MAEIgC,CAFJ;AAAA,MAGIlB,GAHJ;;AAKA,SAAOgB,CAAC,GAAGC,CAAX,EAAcD,CAAC,EAAf,EAAmB;AACjBE,IAAAA,CAAC,GAAGN,KAAK,CAACI,CAAD,CAAT;AACA,QAAI,OAAOE,CAAP,IAAY,QAAhB,EACE;AAEF,QAAIlB,GAAG,GAAG,KAAKC,cAAL,CAAoBiB,CAAC,CAACC,IAAtB,EAA4B,MAA5B,EAAoC,KAAKjB,SAAzC,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;AAEF,QAAIA,GAAG,GAAG,KAAKC,cAAL,CAAoBiB,CAAC,CAACnB,GAAtB,EAA2B,KAA3B,EAAkC,KAAKG,SAAvC,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;;AAEF,QAAIkB,CAAC,CAACC,IAAF,IAAU,KAAd,EAAqB;AACnB,UAAInB,GAAG,GAAG,KAAKC,cAAL,CAAoBiB,CAAC,CAACZ,KAAtB,EAA6B,OAA7B,EAAsC,KAAKJ,SAA3C,CAAV,EACE,OAAOV,QAAQ,CAACQ,GAAD,CAAf;AACH;AACF;;AAED,MAAI,OAAO,KAAKoB,MAAZ,IAAsB,UAA1B,EACE,OAAO,KAAKA,MAAL,CAAYR,KAAZ,EAAmBrB,OAAnB,EAA4BC,QAA5B,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiBH,QAAjB;AACD,CA1CD,C,CA4CA;;;AACAT,iBAAiB,CAACM,SAAlB,CAA4BgC,eAA5B,GAA8C,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB/B,QAAtB,EAAgC;AAC5E,MAAO8B,KAAK,IAAI,IAAT,IACAC,GAAG,IAAI,IADP,IAEA,OAAOD,KAAP,IAAgB,UAFhB,IAGA,OAAOC,GAAP,IAAc,UAHrB,EAGiC;AAC/B,UAAM,IAAInC,KAAJ,CAAU,0EAAV,CAAN;AACD;;AAED,MAAI,OAAOI,QAAP,IAAmB,UAAvB,EACE,MAAM,IAAIJ,KAAJ,CAAU,gDAAV,CAAN;AAEF,MAAI,CAAC,KAAKc,SAAL,CAAeoB,KAAf,CAAL,EACEA,KAAK,GAAGnB,MAAM,CAACmB,KAAD,CAAd;AAEF,MAAI,CAAC,KAAKpB,SAAL,CAAeqB,GAAf,CAAL,EACEA,GAAG,GAAGpB,MAAM,CAACoB,GAAD,CAAZ;AAEF,MAAI,OAAO,KAAKC,gBAAZ,IAAgC,UAApC,EACE,OAAO,KAAKA,gBAAL,CAAsBF,KAAtB,EAA6BC,GAA7B,EAAkC/B,QAAlC,CAAP;AAEFE,EAAAA,OAAO,CAACC,QAAR,CAAiB,YAAY;AAC3BH,IAAAA,QAAQ,CAAC,IAAD,EAAO,CAAP,CAAR;AACD,GAFD;AAGD,CAvBD;;AAyBAT,iBAAiB,CAACM,SAAlB,CAA4BoC,qBAA5B,GAAoD,UAAUlC,OAAV,EAAmB;AACrE,MAAImC,IAAI,GAAG,IAAX;AAEAnC,EAAAA,OAAO,GAAGZ,KAAK,CAACY,OAAD,CAAf;AAEC,GAAE,OAAF,EAAW,KAAX,EAAkB,IAAlB,EAAwB,KAAxB,EAA+B,IAA/B,EAAqC,KAArC,EAA6CoC,OAA7C,CAAqD,UAAUC,CAAV,EAAa;AACjE,QAAIrC,OAAO,CAACqC,CAAD,CAAP,IAAcF,IAAI,CAACxB,SAAL,CAAeX,OAAO,CAACqC,CAAD,CAAtB,CAAd,IAA4CrC,OAAO,CAACqC,CAAD,CAAP,CAAW1C,MAAX,KAAsB,CAAtE,EACE,OAAOK,OAAO,CAACqC,CAAD,CAAd;AACH,GAHA;AAKDrC,EAAAA,OAAO,CAACsC,OAAR,GAAkB,CAAC,CAACtC,OAAO,CAACsC,OAA5B,CAVqE,CAYrE;;AACA,MAAItC,OAAO,CAACsC,OAAR,IAAmBtC,OAAO,CAACuC,EAA/B,EACEvC,OAAO,CAAC+B,KAAR,GAAgB/B,OAAO,CAACuC,EAAxB;AACF,MAAIvC,OAAO,CAACsC,OAAR,IAAmBtC,OAAO,CAACwC,GAA/B,EACExC,OAAO,CAAC+B,KAAR,GAAgB/B,OAAO,CAACwC,GAAxB;AACF,MAAI,CAACxC,OAAO,CAACsC,OAAT,IAAoBtC,OAAO,CAACyC,EAAhC,EACEzC,OAAO,CAAC+B,KAAR,GAAgB/B,OAAO,CAACyC,EAAxB;AACF,MAAI,CAACzC,OAAO,CAACsC,OAAT,IAAoBtC,OAAO,CAAC0C,GAAhC,EACE1C,OAAO,CAAC+B,KAAR,GAAgB/B,OAAO,CAAC0C,GAAxB;AAEF,MAAK1C,OAAO,CAACsC,OAAR,IAAmBtC,OAAO,CAACuC,EAA3B,IAAiC,CAACvC,OAAO,CAACwC,GAA3C,IACE,CAACxC,OAAO,CAACsC,OAAT,IAAoBtC,OAAO,CAACyC,EAA5B,IAAkC,CAACzC,OAAO,CAAC0C,GADjD,EAEE1C,OAAO,CAAC2C,cAAR,GAAyB,IAAzB,CAxBmE,CAwBrC;;AAEhC,SAAO3C,OAAP;AACD,CA3BD;;AA6BAR,iBAAiB,CAACM,SAAlB,CAA4B8C,QAA5B,GAAuC,UAAU5C,OAAV,EAAmB;AACxD,MAAI,OAAOA,OAAP,IAAkB,QAAtB,EACEA,OAAO,GAAG,EAAV;AAEFA,EAAAA,OAAO,GAAG,KAAKkC,qBAAL,CAA2BlC,OAA3B,CAAV;AAEA,MAAI,OAAO,KAAK6C,SAAZ,IAAyB,UAA7B,EACE,OAAO,KAAKA,SAAL,CAAe7C,OAAf,CAAP;AAEF,SAAO,IAAIV,gBAAJ,CAAqB,IAArB,CAAP;AACD,CAVD;;AAYAE,iBAAiB,CAACM,SAAlB,CAA4BwB,aAA5B,GAA4C,YAAY;AACtD,SAAO,IAAI/B,oBAAJ,CAAyB,IAAzB,CAAP;AACD,CAFD;;AAIAC,iBAAiB,CAACM,SAAlB,CAA4Ba,SAA5B,GAAwC,UAAUmC,GAAV,EAAe;AACrD,SAAOC,MAAM,CAACC,QAAP,CAAgBF,GAAhB,CAAP;AACD,CAFD;;AAIAtD,iBAAiB,CAACM,SAAlB,CAA4BY,cAA5B,GAA6C,UAAUoC,GAAV,EAAelB,IAAf,EAAqB;AAEhE,MAAIkB,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAKlD,SAA5B,EACE,OAAO,IAAIC,KAAJ,CAAU+B,IAAI,GAAG,kCAAjB,CAAP;;AAEF,MAAI,KAAKjB,SAAL,CAAemC,GAAf,CAAJ,EAAyB;AACvB,QAAIA,GAAG,CAACnD,MAAJ,KAAe,CAAnB,EACE,OAAO,IAAIE,KAAJ,CAAU+B,IAAI,GAAG,4BAAjB,CAAP;AACH,GAHD,MAGO,IAAIhB,MAAM,CAACkC,GAAD,CAAN,KAAgB,EAApB,EACL,OAAO,IAAIjD,KAAJ,CAAU+B,IAAI,GAAG,4BAAjB,CAAP;AACH,CAVD;;AAYAqB,MAAM,CAACC,OAAP,CAAe1D,iBAAf,GAAsCA,iBAAtC;AACAyD,MAAM,CAACC,OAAP,CAAe5D,gBAAf,GAAsCA,gBAAtC;AACA2D,MAAM,CAACC,OAAP,CAAe3D,oBAAf,GAAsCA,oBAAtC","sourcesContent":["/* Copyright (c) 2013 Rod Vagg, MIT License */\n\nvar xtend                = require('xtend')\n  , AbstractIterator     = require('./abstract-iterator')\n  , AbstractChainedBatch = require('./abstract-chained-batch')\n\nfunction AbstractLevelDOWN (location) {\n  if (!arguments.length || location === undefined)\n    throw new Error('constructor requires at least a location argument')\n\n  if (typeof location != 'string')\n    throw new Error('constructor requires a location string argument')\n\n  this.location = location\n}\n\nAbstractLevelDOWN.prototype.open = function (options, callback) {\n  if (typeof options == 'function')\n    callback = options\n\n  if (typeof callback != 'function')\n    throw new Error('open() requires a callback argument')\n\n  if (typeof options != 'object')\n    options = {}\n\n  if (typeof this._open == 'function')\n    return this._open(options, callback)\n\n  process.nextTick(callback)\n}\n\nAbstractLevelDOWN.prototype.close = function (callback) {\n  if (typeof callback != 'function')\n    throw new Error('close() requires a callback argument')\n\n  if (typeof this._close == 'function')\n    return this._close(callback)\n\n  process.nextTick(callback)\n}\n\nAbstractLevelDOWN.prototype.get = function (key, options, callback) {\n  var err\n\n  if (typeof options == 'function')\n    callback = options\n\n  if (typeof callback != 'function')\n    throw new Error('get() requires a callback argument')\n\n  if (err = this._checkKeyValue(key, 'key', this._isBuffer))\n    return callback(err)\n\n  if (!this._isBuffer(key))\n    key = String(key)\n\n  if (typeof options != 'object')\n    options = {}\n\n  if (typeof this._get == 'function')\n    return this._get(key, options, callback)\n\n  process.nextTick(function () { callback(new Error('NotFound')) })\n}\n\nAbstractLevelDOWN.prototype.put = function (key, value, options, callback) {\n  var err\n\n  if (typeof options == 'function')\n    callback = options\n\n  if (typeof callback != 'function')\n    throw new Error('put() requires a callback argument')\n\n  if (err = this._checkKeyValue(key, 'key', this._isBuffer))\n    return callback(err)\n\n  if (err = this._checkKeyValue(value, 'value', this._isBuffer))\n    return callback(err)\n\n  if (!this._isBuffer(key))\n    key = String(key)\n\n  // coerce value to string in node, don't touch it in browser\n  // (indexeddb can store any JS type)\n  if (!this._isBuffer(value) && !process.browser)\n    value = String(value)\n\n  if (typeof options != 'object')\n    options = {}\n\n  if (typeof this._put == 'function')\n    return this._put(key, value, options, callback)\n\n  process.nextTick(callback)\n}\n\nAbstractLevelDOWN.prototype.del = function (key, options, callback) {\n  var err\n\n  if (typeof options == 'function')\n    callback = options\n\n  if (typeof callback != 'function')\n    throw new Error('del() requires a callback argument')\n\n  if (err = this._checkKeyValue(key, 'key', this._isBuffer))\n    return callback(err)\n\n  if (!this._isBuffer(key))\n    key = String(key)\n\n  if (typeof options != 'object')\n    options = {}\n\n  if (typeof this._del == 'function')\n    return this._del(key, options, callback)\n\n  process.nextTick(callback)\n}\n\nAbstractLevelDOWN.prototype.batch = function (array, options, callback) {\n  if (!arguments.length)\n    return this._chainedBatch()\n\n  if (typeof options == 'function')\n    callback = options\n\n  if (typeof callback != 'function')\n    throw new Error('batch(array) requires a callback argument')\n\n  if (!Array.isArray(array))\n    return callback(new Error('batch(array) requires an array argument'))\n\n  if (typeof options != 'object')\n    options = {}\n\n  var i = 0\n    , l = array.length\n    , e\n    , err\n\n  for (; i < l; i++) {\n    e = array[i]\n    if (typeof e != 'object')\n      continue\n\n    if (err = this._checkKeyValue(e.type, 'type', this._isBuffer))\n      return callback(err)\n\n    if (err = this._checkKeyValue(e.key, 'key', this._isBuffer))\n      return callback(err)\n\n    if (e.type == 'put') {\n      if (err = this._checkKeyValue(e.value, 'value', this._isBuffer))\n        return callback(err)\n    }\n  }\n\n  if (typeof this._batch == 'function')\n    return this._batch(array, options, callback)\n\n  process.nextTick(callback)\n}\n\n//TODO: remove from here, not a necessary primitive\nAbstractLevelDOWN.prototype.approximateSize = function (start, end, callback) {\n  if (   start == null\n      || end == null\n      || typeof start == 'function'\n      || typeof end == 'function') {\n    throw new Error('approximateSize() requires valid `start`, `end` and `callback` arguments')\n  }\n\n  if (typeof callback != 'function')\n    throw new Error('approximateSize() requires a callback argument')\n\n  if (!this._isBuffer(start))\n    start = String(start)\n\n  if (!this._isBuffer(end))\n    end = String(end)\n\n  if (typeof this._approximateSize == 'function')\n    return this._approximateSize(start, end, callback)\n\n  process.nextTick(function () {\n    callback(null, 0)\n  })\n}\n\nAbstractLevelDOWN.prototype._setupIteratorOptions = function (options) {\n  var self = this\n\n  options = xtend(options)\n\n  ;[ 'start', 'end', 'gt', 'gte', 'lt', 'lte' ].forEach(function (o) {\n    if (options[o] && self._isBuffer(options[o]) && options[o].length === 0)\n      delete options[o]\n  })\n\n  options.reverse = !!options.reverse\n\n  // fix `start` so it takes into account gt, gte, lt, lte as appropriate\n  if (options.reverse && options.lt)\n    options.start = options.lt\n  if (options.reverse && options.lte)\n    options.start = options.lte\n  if (!options.reverse && options.gt)\n    options.start = options.gt\n  if (!options.reverse && options.gte)\n    options.start = options.gte\n\n  if ((options.reverse && options.lt && !options.lte)\n    || (!options.reverse && options.gt && !options.gte))\n    options.exclusiveStart = true // start should *not* include matching key\n\n  return options\n}\n\nAbstractLevelDOWN.prototype.iterator = function (options) {\n  if (typeof options != 'object')\n    options = {}\n\n  options = this._setupIteratorOptions(options)\n\n  if (typeof this._iterator == 'function')\n    return this._iterator(options)\n\n  return new AbstractIterator(this)\n}\n\nAbstractLevelDOWN.prototype._chainedBatch = function () {\n  return new AbstractChainedBatch(this)\n}\n\nAbstractLevelDOWN.prototype._isBuffer = function (obj) {\n  return Buffer.isBuffer(obj)\n}\n\nAbstractLevelDOWN.prototype._checkKeyValue = function (obj, type) {\n\n  if (obj === null || obj === undefined)\n    return new Error(type + ' cannot be `null` or `undefined`')\n\n  if (this._isBuffer(obj)) {\n    if (obj.length === 0)\n      return new Error(type + ' cannot be an empty Buffer')\n  } else if (String(obj) === '')\n    return new Error(type + ' cannot be an empty String')\n}\n\nmodule.exports.AbstractLevelDOWN    = AbstractLevelDOWN\nmodule.exports.AbstractIterator     = AbstractIterator\nmodule.exports.AbstractChainedBatch = AbstractChainedBatch\n"]},"metadata":{},"sourceType":"script"}
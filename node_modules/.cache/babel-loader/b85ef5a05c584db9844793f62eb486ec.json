{"ast":null,"code":"module.exports = Level;\n\nvar IDB = require('idb-wrapper');\n\nvar AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN;\n\nvar util = require('util');\n\nvar Iterator = require('./iterator');\n\nvar isBuffer = require('isbuffer');\n\nvar xtend = require('xtend');\n\nvar toBuffer = require('typedarray-to-buffer');\n\nfunction Level(location) {\n  if (!(this instanceof Level)) return new Level(location);\n  if (!location) throw new Error(\"constructor requires at least a location argument\");\n  this.IDBOptions = {};\n  this.location = location;\n}\n\nutil.inherits(Level, AbstractLevelDOWN);\n\nLevel.prototype._open = function (options, callback) {\n  var self = this;\n  var idbOpts = {\n    storeName: this.location,\n    autoIncrement: false,\n    keyPath: null,\n    onStoreReady: function () {\n      callback && callback(null, self.idb);\n    },\n    onError: function (err) {\n      callback && callback(err);\n    }\n  };\n  xtend(idbOpts, options);\n  this.IDBOptions = idbOpts;\n  this.idb = new IDB(idbOpts);\n};\n\nLevel.prototype._get = function (key, options, callback) {\n  this.idb.get(key, function (value) {\n    if (value === undefined) {\n      // 'NotFound' error, consistent with LevelDOWN API\n      return callback(new Error('NotFound'));\n    } // by default return buffers, unless explicitly told not to\n\n\n    var asBuffer = true;\n    if (options.asBuffer === false) asBuffer = false;\n    if (options.raw) asBuffer = false;\n\n    if (asBuffer) {\n      if (value instanceof Uint8Array) value = toBuffer(value);else value = new Buffer(String(value));\n    }\n\n    return callback(null, value, key);\n  }, callback);\n};\n\nLevel.prototype._del = function (id, options, callback) {\n  this.idb.remove(id, callback, callback);\n};\n\nLevel.prototype._put = function (key, value, options, callback) {\n  if (value instanceof ArrayBuffer) {\n    value = toBuffer(new Uint8Array(value));\n  }\n\n  var obj = this.convertEncoding(key, value, options);\n\n  if (Buffer.isBuffer(obj.value)) {\n    if (typeof value.toArrayBuffer === 'function') {\n      obj.value = new Uint8Array(value.toArrayBuffer());\n    } else {\n      obj.value = new Uint8Array(value);\n    }\n  }\n\n  this.idb.put(obj.key, obj.value, function () {\n    callback();\n  }, callback);\n};\n\nLevel.prototype.convertEncoding = function (key, value, options) {\n  if (options.raw) return {\n    key: key,\n    value: value\n  };\n\n  if (value) {\n    var stringed = value.toString();\n    if (stringed === 'NaN') value = 'NaN';\n  }\n\n  var valEnc = options.valueEncoding;\n  var obj = {\n    key: key,\n    value: value\n  };\n\n  if (value && (!valEnc || valEnc !== 'binary')) {\n    if (typeof obj.value !== 'object') {\n      obj.value = stringed;\n    }\n  }\n\n  return obj;\n};\n\nLevel.prototype.iterator = function (options) {\n  if (typeof options !== 'object') options = {};\n  return new Iterator(this.idb, options);\n};\n\nLevel.prototype._batch = function (array, options, callback) {\n  var op;\n  var i;\n  var k;\n  var copiedOp;\n  var currentOp;\n  var modified = [];\n  if (array.length === 0) return setTimeout(callback, 0);\n\n  for (i = 0; i < array.length; i++) {\n    copiedOp = {};\n    currentOp = array[i];\n    modified[i] = copiedOp;\n    var converted = this.convertEncoding(currentOp.key, currentOp.value, options);\n    currentOp.key = converted.key;\n    currentOp.value = converted.value;\n\n    for (k in currentOp) {\n      if (k === 'type' && currentOp[k] == 'del') {\n        copiedOp[k] = 'remove';\n      } else {\n        copiedOp[k] = currentOp[k];\n      }\n    }\n  }\n\n  return this.idb.batch(modified, function () {\n    callback();\n  }, callback);\n};\n\nLevel.prototype._close = function (callback) {\n  this.idb.db.close();\n  callback();\n};\n\nLevel.prototype._approximateSize = function (start, end, callback) {\n  var err = new Error('Not implemented');\n  if (callback) return callback(err);\n  throw err;\n};\n\nLevel.prototype._isBuffer = function (obj) {\n  return Buffer.isBuffer(obj);\n};\n\nLevel.destroy = function (db, callback) {\n  if (typeof db === 'object') {\n    var prefix = db.IDBOptions.storePrefix || 'IDBWrapper-';\n    var dbname = db.location;\n  } else {\n    var prefix = 'IDBWrapper-';\n    var dbname = db;\n  }\n\n  var request = indexedDB.deleteDatabase(prefix + dbname);\n\n  request.onsuccess = function () {\n    callback();\n  };\n\n  request.onerror = function (err) {\n    callback(err);\n  };\n};\n\nvar checkKeyValue = Level.prototype._checkKeyValue = function (obj, type) {\n  if (obj === null || obj === undefined) return new Error(type + ' cannot be `null` or `undefined`');\n  if (obj === null || obj === undefined) return new Error(type + ' cannot be `null` or `undefined`');\n  if (isBuffer(obj) && obj.byteLength === 0) return new Error(type + ' cannot be an empty ArrayBuffer');\n  if (String(obj) === '') return new Error(type + ' cannot be an empty String');\n  if (obj.length === 0) return new Error(type + ' cannot be an empty Array');\n};","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/node_modules/level-js/index.js"],"names":["module","exports","Level","IDB","require","AbstractLevelDOWN","util","Iterator","isBuffer","xtend","toBuffer","location","Error","IDBOptions","inherits","prototype","_open","options","callback","self","idbOpts","storeName","autoIncrement","keyPath","onStoreReady","idb","onError","err","_get","key","get","value","undefined","asBuffer","raw","Uint8Array","Buffer","String","_del","id","remove","_put","ArrayBuffer","obj","convertEncoding","toArrayBuffer","put","stringed","toString","valEnc","valueEncoding","iterator","_batch","array","op","i","k","copiedOp","currentOp","modified","length","setTimeout","converted","batch","_close","db","close","_approximateSize","start","end","_isBuffer","destroy","prefix","storePrefix","dbname","request","indexedDB","deleteDatabase","onsuccess","onerror","checkKeyValue","_checkKeyValue","type","byteLength"],"mappings":"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","sourcesContent":["module.exports = Level\n\nvar IDB = require('idb-wrapper')\nvar AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN\nvar util = require('util')\nvar Iterator = require('./iterator')\nvar isBuffer = require('isbuffer')\nvar xtend = require('xtend')\nvar toBuffer = require('typedarray-to-buffer')\n\nfunction Level(location) {\n  if (!(this instanceof Level)) return new Level(location)\n  if (!location) throw new Error(\"constructor requires at least a location argument\")\n  this.IDBOptions = {}\n  this.location = location\n}\n\nutil.inherits(Level, AbstractLevelDOWN)\n\nLevel.prototype._open = function(options, callback) {\n  var self = this\n    \n  var idbOpts = {\n    storeName: this.location,\n    autoIncrement: false,\n    keyPath: null,\n    onStoreReady: function () {\n      callback && callback(null, self.idb)\n    }, \n    onError: function(err) {\n      callback && callback(err)\n    }\n  }\n  \n  xtend(idbOpts, options)\n  this.IDBOptions = idbOpts\n  this.idb = new IDB(idbOpts)\n}\n\nLevel.prototype._get = function (key, options, callback) {\n  this.idb.get(key, function (value) {\n    if (value === undefined) {\n      // 'NotFound' error, consistent with LevelDOWN API\n      return callback(new Error('NotFound'))\n    }\n    // by default return buffers, unless explicitly told not to\n    var asBuffer = true\n    if (options.asBuffer === false) asBuffer = false\n    if (options.raw) asBuffer = false\n    if (asBuffer) {\n      if (value instanceof Uint8Array) value = toBuffer(value)\n      else value = new Buffer(String(value))\n    }\n    return callback(null, value, key)\n  }, callback)\n}\n\nLevel.prototype._del = function(id, options, callback) {\n  this.idb.remove(id, callback, callback)\n}\n\nLevel.prototype._put = function (key, value, options, callback) {\n  if (value instanceof ArrayBuffer) {\n    value = toBuffer(new Uint8Array(value))\n  }\n  var obj = this.convertEncoding(key, value, options)\n  if (Buffer.isBuffer(obj.value)) {\n    if (typeof value.toArrayBuffer === 'function') {\n      obj.value = new Uint8Array(value.toArrayBuffer())\n    } else {\n      obj.value = new Uint8Array(value)\n    }\n  }\n  this.idb.put(obj.key, obj.value, function() { callback() }, callback)\n}\n\nLevel.prototype.convertEncoding = function(key, value, options) {\n  if (options.raw) return {key: key, value: value}\n  if (value) {\n    var stringed = value.toString()\n    if (stringed === 'NaN') value = 'NaN'\n  }\n  var valEnc = options.valueEncoding\n  var obj = {key: key, value: value}\n  if (value && (!valEnc || valEnc !== 'binary')) {\n    if (typeof obj.value !== 'object') {\n      obj.value = stringed\n    }\n  }\n  return obj\n}\n\nLevel.prototype.iterator = function (options) {\n  if (typeof options !== 'object') options = {}\n  return new Iterator(this.idb, options)\n}\n\nLevel.prototype._batch = function (array, options, callback) {\n  var op\n  var i\n  var k\n  var copiedOp\n  var currentOp\n  var modified = []\n  \n  if (array.length === 0) return setTimeout(callback, 0)\n  \n  for (i = 0; i < array.length; i++) {\n    copiedOp = {}\n    currentOp = array[i]\n    modified[i] = copiedOp\n    \n    var converted = this.convertEncoding(currentOp.key, currentOp.value, options)\n    currentOp.key = converted.key\n    currentOp.value = converted.value\n\n    for (k in currentOp) {\n      if (k === 'type' && currentOp[k] == 'del') {\n        copiedOp[k] = 'remove'\n      } else {\n        copiedOp[k] = currentOp[k]\n      }\n    }\n  }\n\n  return this.idb.batch(modified, function(){ callback() }, callback)\n}\n\nLevel.prototype._close = function (callback) {\n  this.idb.db.close()\n  callback()\n}\n\nLevel.prototype._approximateSize = function (start, end, callback) {\n  var err = new Error('Not implemented')\n  if (callback)\n    return callback(err)\n\n  throw err\n}\n\nLevel.prototype._isBuffer = function (obj) {\n  return Buffer.isBuffer(obj)\n}\n\nLevel.destroy = function (db, callback) {\n  if (typeof db === 'object') {\n    var prefix = db.IDBOptions.storePrefix || 'IDBWrapper-'\n    var dbname = db.location\n  } else {\n    var prefix = 'IDBWrapper-'\n    var dbname = db\n  }\n  var request = indexedDB.deleteDatabase(prefix + dbname)\n  request.onsuccess = function() {\n    callback()\n  }\n  request.onerror = function(err) {\n    callback(err)\n  }\n}\n\nvar checkKeyValue = Level.prototype._checkKeyValue = function (obj, type) {\n  if (obj === null || obj === undefined)\n    return new Error(type + ' cannot be `null` or `undefined`')\n  if (obj === null || obj === undefined)\n    return new Error(type + ' cannot be `null` or `undefined`')\n  if (isBuffer(obj) && obj.byteLength === 0)\n    return new Error(type + ' cannot be an empty ArrayBuffer')\n  if (String(obj) === '')\n    return new Error(type + ' cannot be an empty String')\n  if (obj.length === 0)\n    return new Error(type + ' cannot be an empty Array')\n}\n"]},"metadata":{},"sourceType":"script"}
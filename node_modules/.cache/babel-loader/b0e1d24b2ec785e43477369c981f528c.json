{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./calendar.css';import buildCalendar from'./build';import renderKayaks from'./renderKayaks';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{Container,Row,Col}from'react-bootstrap';export default function Calendar(_ref){var value=_ref.value,onChange=_ref.onChange,back=_ref.back,booked=_ref.booked,kayaksInStock=_ref.kayaksInStock,form=_ref.form;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),calendar=_useState2[0],setCalendar=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),kayaksLeft=_useState4[0],setKayaksLeft=_useState4[1];var _useState5=useState('no guide'),_useState6=_slicedToArray(_useState5,2),guidedRoute=_useState6[0],setGuideRoute=_useState6[1];useEffect(function(){setCalendar(buildCalendar(value));setKayaksLeft(renderKayaks(value,kayaksInStock,booked));// rendering 'Guide on: {guideRoute}'\nsetGuideRoute('no guide');booked.forEach(function(bookingData){if(bookingData.name==='guide1706'&&value.isSame(bookingData.date,'day')){setGuideRoute(bookingData.route);}});},[value]);function currMonthName(){return value.format('MMMM');}function currYear(){return value.format('YYYY');}function prevMonth(){return value.clone().subtract(1,'month');}function nextMonth(){return value.clone().add(1,'month');}function thisMonth(){return value.isSame(new Date(),'month');}//styling\nfunction isSelected(day,value){return value.isSame(day,'day');}function beforeToday(day){return day.isBefore(new Date(),'day');}function isToday(day){return day.isSame(new Date(),'day');}//styling num of kayaks\n// 0 left\nfunction isBooked0(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal===kayaksInStock||kayaksBookedTotal+1===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}// 2 + left\nfunction isBooked2(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal+2===kayaksInStock||kayaksBookedTotal+3===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}// 4 + left\nfunction isBooked4(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal+4===kayaksInStock||kayaksBookedTotal+5===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}// 6 + left\nfunction isBooked6(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal+6===kayaksInStock||kayaksBookedTotal+7===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}function isGuided(day){var classes=null;var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var kayakCount=[];booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){if(bookedData.name==='guide1706'){classes=bookedData.date;}}}});return day.isSame(classes,'day');}function dayStyles(day,value){if(beforeToday(day))return'before';if(isSelected(day,value))return'red';if(isToday(day))return'today';if(isBooked0(day))return'kayaks-0';if(isBooked2(day))return'kayaks-2';if(isBooked4(day))return'kayaks-4';if(isBooked6(day))return'kayaks-6';return'';}function guideStyle(day,value){if(isGuided(day))return'guide-yes';return'guide-no';}function guideStyleForDay(day,value){if(isGuided(day))return'guide-no';return'guide-yes';}// const guideRouteHandler = (booked, value) => {\n//     let select = 'no guide'\n//     booked.forEach(bookingData => {\n//         if ((bookingData.name === 'guide1706') && value.isSame(bookingData.date, 'day')){\n//             select = bookingData.route\n//         }\n//     });\n//     return select\n// }\nreturn/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"div\",{className:\"calendar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"previous\",onClick:function onClick(){return!thisMonth()&&onChange(prevMonth());}},!thisMonth()?String.fromCharCode(171):null),/*#__PURE__*/React.createElement(\"div\",{className:\"current\"},currMonthName(),\" \",currYear()),/*#__PURE__*/React.createElement(\"div\",{className:\"next\",onClick:function onClick(){onChange(nextMonth());}},String.fromCharCode(187))),/*#__PURE__*/React.createElement(\"div\",{className:\"body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"day-names\"},[\"s\",\"m\",\"t\",\"w\",\"t\",\"f\",\"s\"].map(function(d){return/*#__PURE__*/React.createElement(\"div\",{className:\"week\"},d);})),calendar.map(function(week){return/*#__PURE__*/React.createElement(\"div\",null,week.map(function(day){return/*#__PURE__*/React.createElement(\"div\",{className:\"day\",id:day.format(\"D\"),key:day,onClick:function onClick(){!beforeToday(day)&&onChange(day);// console.log('clicked', day)\n}},/*#__PURE__*/React.createElement(\"div\",{className:dayStyles(day,value)},/*#__PURE__*/React.createElement(\"span\",{className:guideStyleForDay(day,value)},day.format('D').toString()),/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"compass\",className:guideStyle(day,value),size:\"2x\"})));}));}))),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:2,className:\"button-hover\"},/*#__PURE__*/React.createElement(\"div\",{onClick:back,className:\"selection-footer form-button no-hover\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-left\",size:\"1x\"}),\" Back\")),/*#__PURE__*/React.createElement(Col,{sm:7},/*#__PURE__*/React.createElement(\"div\",{className:\"selection-footer \"},/*#__PURE__*/React.createElement(\"h6\",{className:\"cal-b-text\"},\"Date Selected: \",value.format(\"MM/DD\")),/*#__PURE__*/React.createElement(\"h6\",{className:\"cal-b-text\"},\"Number of Kayaks Avalible: \",kayaksLeft),/*#__PURE__*/React.createElement(\"h6\",{className:\"cal-b-text\"},\"Guide on: \",guidedRoute))),/*#__PURE__*/React.createElement(Col,{sm:1}),/*#__PURE__*/React.createElement(Col,{sm:2,className:\"button-hover\"},/*#__PURE__*/React.createElement(\"div\",{onClick:form,className:\"selection-footer form-button no-hover\"},\"Continue \",/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-right\",size:\"1x\"}))),/*#__PURE__*/React.createElement(Col,null))));}","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/calendar/index.jsx"],"names":["React","useState","useEffect","buildCalendar","renderKayaks","FontAwesomeIcon","Container","Row","Col","Calendar","value","onChange","back","booked","kayaksInStock","form","calendar","setCalendar","kayaksLeft","setKayaksLeft","guidedRoute","setGuideRoute","forEach","bookingData","name","isSame","date","route","currMonthName","format","currYear","prevMonth","clone","subtract","nextMonth","add","thisMonth","Date","isSelected","day","beforeToday","isBefore","isToday","isBooked0","kayakCount","reducer","accumulator","currentValue","classes","bookedData","parsedKayaks","JSON","parse","numOfKayaks","push","length","kayaksBookedTotal","reduce","isBooked2","isBooked4","isBooked6","isGuided","dayStyles","guideStyle","guideStyleForDay","String","fromCharCode","map","d","week","toString"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './calendar.css';\r\nimport buildCalendar from './build';\r\nimport renderKayaks from './renderKayaks';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\n\r\nexport default function Calendar({value, onChange, back, booked, kayaksInStock , form}) {\r\n    const [calendar , setCalendar] = useState([]);\r\n    const [kayaksLeft, setKayaksLeft] = useState();\r\n    const [guidedRoute, setGuideRoute] = useState('no guide');\r\n\r\n\r\n    useEffect(() => {\r\n        setCalendar(buildCalendar(value));\r\n        setKayaksLeft(renderKayaks(value, kayaksInStock, booked));\r\n\r\n        // rendering 'Guide on: {guideRoute}'\r\n        setGuideRoute('no guide')\r\n        booked.forEach(bookingData => {\r\n            if ((bookingData.name === 'guide1706') && value.isSame(bookingData.date, 'day')){\r\n                setGuideRoute(bookingData.route)\r\n            }\r\n        });\r\n\r\n    }, [value])\r\n\r\n    function currMonthName() {\r\n        return value.format('MMMM')\r\n    }\r\n\r\n    function currYear() {\r\n        return value.format('YYYY')\r\n    }\r\n\r\n    function prevMonth() {\r\n        return value.clone().subtract(1, 'month')\r\n    }\r\n\r\n    function nextMonth() {\r\n        return value.clone().add(1, 'month')\r\n    }\r\n\r\n    function thisMonth() {\r\n        return value.isSame(new Date(), 'month')\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    //styling\r\n    function isSelected(day, value) {\r\n        return value.isSame(day, 'day');\r\n    }\r\n    function beforeToday(day) {\r\n        return day.isBefore(new Date(), 'day');\r\n    }\r\n    function isToday(day) {\r\n        return day.isSame(new Date(), 'day');\r\n    }\r\n\r\n\r\n     \r\n\r\n        //styling num of kayaks\r\n        // 0 left\r\n    function isBooked0(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null  \r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day') ) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if((kayaksBookedTotal === kayaksInStock) || ((kayaksBookedTotal + 1) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n\r\n\r\n        // 2 + left\r\n    function isBooked2(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if(((kayaksBookedTotal + 2) === kayaksInStock) || ((kayaksBookedTotal + 3) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n        // 4 + left\r\n    function isBooked4(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if(((kayaksBookedTotal + 4) === kayaksInStock) || ((kayaksBookedTotal + 5) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n        // 6 + left\r\n    function isBooked6(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if(((kayaksBookedTotal + 6) === kayaksInStock) || ((kayaksBookedTotal + 7) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n\r\n\r\n    function isGuided(day) {\r\n        let classes = null\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let kayakCount = []\r\n\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    if (bookedData.name === 'guide1706'){\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n\r\n    function dayStyles(day, value) {\r\n        if (beforeToday(day)) return 'before'\r\n        if (isSelected(day, value)) return 'red'\r\n        if (isToday(day)) return 'today'\r\n        if (isBooked0(day)) return 'kayaks-0'\r\n        if (isBooked2(day)) return 'kayaks-2'\r\n        if (isBooked4(day)) return 'kayaks-4'\r\n        if (isBooked6(day)) return 'kayaks-6'\r\n        return ''\r\n    }\r\n\r\n\r\n\r\n\r\n    function guideStyle(day, value) {\r\n        if (isGuided(day)) return 'guide-yes'\r\n        return 'guide-no'\r\n    }\r\n    function guideStyleForDay(day, value) {\r\n        if (isGuided(day)) return 'guide-no'\r\n        return 'guide-yes'\r\n    }\r\n\r\n\r\n\r\n\r\n    // const guideRouteHandler = (booked, value) => {\r\n    //     let select = 'no guide'\r\n\r\n    //     booked.forEach(bookingData => {\r\n    //         if ((bookingData.name === 'guide1706') && value.isSame(bookingData.date, 'day')){\r\n    //             select = bookingData.route\r\n    //         }\r\n    //     });\r\n\r\n    //     return select\r\n    // }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return ( \r\n        <Container>\r\n            <div className='calendar'>\r\n                <div className='header'>\r\n                    <div className='previous' onClick={() => !thisMonth() && onChange(prevMonth())}>\r\n                    {!thisMonth() ? String.fromCharCode(171) : null}</div>\r\n                    <div className='current'>\r\n                        {currMonthName()} {currYear()}\r\n                    </div>\r\n                    <div className='next' onClick={() => {onChange(nextMonth())}}>{String.fromCharCode(187)}</div>\r\n                </div>\r\n                <div className='body'>\r\n                    <div className=\"day-names\">\r\n                        {\r\n                            [\"s\",\"m\",\"t\",\"w\",\"t\",\"f\",\"s\"].map(d => <div className='week'>{d}</div>)\r\n                        }\r\n                    </div>\r\n                    {calendar.map((week) => (\r\n                        <div>\r\n                            {week.map((day) => (\r\n                                <div  className='day' id={day.format(\"D\")} key={day} \r\n                                onClick={() => { !beforeToday(day) && onChange(day)\r\n                                    // console.log('clicked', day)\r\n                                    }}>\r\n                                    <div className={dayStyles(day, value)}>\r\n                                        <span className={guideStyleForDay(day, value)} >{day.format('D').toString()}</span>\r\n                                        <FontAwesomeIcon icon=\"compass\"  className={guideStyle(day, value)}  size=\"2x\" />\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <Container>\r\n                <Row>\r\n                    <Col sm={2} className='button-hover' >\r\n                        <div onClick={back}  className='selection-footer form-button no-hover' >\r\n                            <FontAwesomeIcon icon=\"arrow-left\" size=\"1x\" /> Back\r\n                        </div>\r\n                    </Col>\r\n                    <Col  sm={7}>\r\n                        <div className='selection-footer ' >\r\n                            <h6 className='cal-b-text' >Date Selected: {value.format(\"MM/DD\")}</h6>\r\n                            <h6 className='cal-b-text' >Number of Kayaks Avalible: {kayaksLeft}</h6>\r\n                            <h6 className='cal-b-text' >Guide on: {guidedRoute}</h6>\r\n                        </div>\r\n                    </Col>\r\n                    <Col sm={1}></Col>\r\n                    <Col sm={2} className='button-hover' >\r\n                        <div onClick={form} className='selection-footer form-button no-hover' >\r\n                            Continue <FontAwesomeIcon icon=\"arrow-right\"  size=\"1x\" />\r\n                        </div>\r\n                    </Col>\r\n                    <Col></Col>\r\n                </Row>\r\n            </Container>\r\n        </Container>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}